# MBC PLUS MCR 디지털 업무일지 시스템 - 상세 요구사항 명세서

## 1. 시스템 개요
**MCR 디지털 업무일지 시스템**은 MBC PLUS의 방송 운행 및 송출 업무를 효율적으로 관리하기 위한 웹 기반 플랫폼입니다. 기존의 수기 업무일지를 디지털화하여 데이터의 정확성을 높이고, 실시간 모니터링 및 통계 분석 기능을 제공합니다.

## 2. 주요 기능 요구사항

### 2.1 사용자 관리 및 인증
- **회원가입/로그인/로그아웃**
  - **인증 방식**: JWT (JSON Web Token) 기반 인증.
  - **세션 관리**:
    - Access Token: 24시간 유효.
    - Refresh Token: 7일 유효 (자동 로그인 유지).
  - **기타**: 비밀번호 재설정 기능.
- **사용자 역할 (Role)**
  - `director`: 주조감독 (총괄 관리).
  - `assistant_director`: CMS감독.
  - `backup_director`: 예비감독.
  - `team_leader`: 영상감독 (팀 리더).
  - `admin`: 시스템 관리자.
- **권한 제어 (RBAC)**
  - 역할별 메뉴 및 기능 접근 권한 제어.
  - 일지 작성/수정/삭제 권한 차등 부여.
  - 통계 및 보고서 조회 권한 관리.

### 2.2 업무일지 관리
- **기본 정보**
  - **근무일 기준**: 당일 07:30 ~ 익일 07:30 (24시간 기준).
  - **일지 작성 원칙**: 1일 기준(07:30~익일 07:30)으로 **A근무 일지**와 **N근무 일지**가 각각 작성됨.
  - **팀 구성**: 각 팀당 3~4명 (기본 3명 + 상황에 따라 1명 추가).
  - **근무 패턴 (ANSYY 5일 주기)**:
    - **A (Day)**: 주간 근무 (07:30 ~ 19:00).
    - **N (Night)**: 야간 근무 (18:30 ~ 08:00 익일). *통상 'NS'로 지칭*.
    - **S (Sleep)**: 야간 근무 종료일 (휴식).
    - **Y (Off)**: 휴무.
    - **Y (Off)**: 휴무.
  - **근무조 운영 (10개 팀 순환)**:
    - 10개 팀이 5일 주기의 패턴을 순환하며 근무.
    - 예시:
      - 1조: A - N - S - Y - Y
      - 2조: N - S - Y - Y - A
      - 3조: S - Y - Y - A - N (SYYAN)
  - **근무자**: 주조감독, CMS감독, 예비감독, 영상감독 지정.
  - **제약조건**: 사용자당 날짜별 1개의 일지 생성 (Unique Constraint).
- **채널별 송출사항**
  - **대상 채널**: MBC SPORTS+, MBC Every1, MBC DRAMA, MBC M, MBC ON.
  - **운행표 등록**: 각 채널별 1~5회 등록 횟수 관리.
  - **내용 관리**: 관련 내용 및 추가 내용 입력/수정/삭제.
  - **포스트 연동**: '메모 추가' 버튼을 통해 통합 포스트 작성 및 자동 연결.
- **장비 및 시스템**
  - 장비/시스템 주요사항 및 추가 이슈 기록.
- **업무확인 서명 시스템**
  - **4단계 서명**: 운행 파트 -> 팀장 파트 -> MCR 파트 -> Network 파트.
  - **모니터링**: 각 파트별 서명 상태 및 진행률(%) 실시간 표시.
  - **기록**: 서명자 정보(ID) 및 서명 완료 시점(Timestamp) 저장.
- **상태 관리**
  - `Draft` (임시저장) <-> `Published` (발행) 상태 전환.

### 2.3 통합 포스트 시스템
- **포스트 관리**
  - **에디터**: React Quill 기반의 Rich Text Editor (HTML 지원).
  - **분류**: 카테고리 및 태그 시스템 적용.
  - **작성자**: 개인 또는 팀 단위 작성자 구분.
- **채널 연동**
  - 업무일지의 ChannelBroadcast와 1:1 연동 지원.
  - 연동된 글의 요약 텍스트 표시 설정.
- **AI 통합 (Smart Features)**
  - **서비스**: `posts/ai_service.py` 연동.
  - **기능**: 게시글 내용 요약, 재정리, AI 처리 상태 추적.
- **커뮤니티 기능**
  - 조회수 트래킹, 추천(좋아요) 기능.
  - 계층형(대댓글) 댓글 시스템.

### 2.4 첨부파일 관리
- **대상**: WorkLog 또는 ChannelBroadcast에 파일 첨부.
- **지원 형식**: 이미지(Image), 문서(Document).
- **제한**: 파일당 최대 20MB.
- **보안**: MIME 타입 검증 및 업로드 경로 자동 관리.

### 2.5 대시보드
- **일일 현황**
  - 당일 근무조 및 담당자 정보, 근무 시간대 표시.
  - 채널별 운행표 등록 현황 및 실시간 이슈 모니터링.
  - 4개 파트별 서명 완료 상태 및 미서명 알림.
  - 당일 주요 이슈 요약 (긴급도별).
- **통계 및 분석**
  - **업무 통계**: 월별/주별 일지 작성 현황, 담당자별 업무량.
  - **운행 분석**: 채널별 등록 횟수 분포, 시간대별 패턴.
  - **이슈 분석**: 장비/시스템 이슈 빈도 및 트렌드.
  - **서명 분석**: 파트별 서명 완료율 및 지연 패턴.

### 2.6 보고서 생성
- **유형**: 일간/주간/월간 보고서 및 사용자 정의 기간 설정.
- **형식**: PDF, Excel 내보내기 지원.
- **템플릿**: 표준 양식 및 인쇄 최적화 레이아웃 제공.

### 2.7 시스템 설정 (System Configuration)
- **근무조 및 패턴 관리**:
  - **유연성**: 근무조의 구성원과 근무 패턴(순서, 주기 등)은 변경될 수 있음.
  - **관리 기능**: 관리자(Admin) 또는 권한이 있는 사용자가 설정 페이지를 통해 다음 항목을 수정할 수 있어야 함.
    - 팀별 근무자 구성 (이동, 추가, 제외).
    - 근무 패턴 순서 및 주기 (예: ANSYY 패턴 변경 등).
  - **적용**: 변경된 설정은 즉시 또는 지정된 시점부터 일지 생성 로직에 반영되어야 함.

## 3. 비기능적 요구사항

### 3.1 성능 및 가용성
- **응답 속도**: 페이지 로딩 3초 이내 목표.
- **동시 접속**: 최대 50명 동시 사용자 지원.
- **데이터**: 대용량 첨부파일(20MB) 처리 최적화.
- **백업/복구**: 일일 자동 백업 및 데이터 복구 절차 수립.

### 3.2 사용성 (UI/UX)
- **반응형 디자인**: 데스크톱, 태블릿, 모바일 환경 완벽 지원.
- **직관성**: 기존 종이 업무일지 양식의 레이아웃을 반영하여 학습 곡선 최소화.
- **접근성**: 웹 접근성 표준 준수.

### 3.3 보안
- **데이터 보호**: 민감 정보 암호화 저장.
- **접근 제어**: 철저한 역할 기반 권한 관리 (RBAC).
- **감사(Audit)**: 모든 사용자 활동에 대한 로그 기록.
- **파일 보안**: 업로드 파일에 대한 악성코드 검사 및 보안 검증.
